<link rel="stylesheet" href="demo-static.css">
<div id="app">
    <div class="app-content">
        <oj-button id="openPopupBtn" on-oj-action="[[openPopup]]">Open</oj-button>
        <oj-popup id="popupList">
            <div class="app-table">
                <oj-list-view data=" [[dataProvider]]
            ">
            <template slot="itemTemplate">
                <div>
                    <span class="oj-badge oj-badge-info"><oj-bind-text value="[[$current.index]]"></oj-bind-text></span>
                    <span><oj-bind-text value="[[$current.data.label]]"></oj-bind-text></span>
                </div>
            </template>
            </oj-list-view>
    </div>
    </oj-popup>
</div>
</div>

<script type="text/javascript" src="../../../web/js/libs/require/require.js"></script>
<script type="text/javascript" src="../requirejs-ojet.js"></script>
<script>
    requirejs.config({baseUrl: '../../../web/js'});
    require([
        'knockout',
        'ojs/ojarraydataprovider',
        'ojs/ojknockout',
        'ojs/ojlistview',
        'ojs/ojpopup',
        'ojs/ojbutton'
    ], function (ko, ArrayDataProvider) {
        let app = new function () {
            this.data = ko.observableArray([]);
            this.dataProvider = new ArrayDataProvider(this.data);

            // Init
            for (let i = 0; i < 10; i++) {
                this.data.push({label: (i % 3) + '_' + Math.random()});
            }

            this.openPopup = () => {
                let popup = document.getElementById("popupList");
                popup.open("#openPopupBtn");
            }
        };
        ko.applyBindings(app);
    });
</script>
